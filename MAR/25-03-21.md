# TIL 

## 날짜: 2025-03-21

### 스크럼
- 학습 목표 1 : JWT 토큰 기반 인증 구현

### 새로 배운 내용
#### 🎫 주제 1: JWT 라이브러리: jjwt vs. java-jwt
- jjwt
  - 간단하고 직관적인 API 제공
  - 토큰 생성, 파싱, 검증 등 기본 기능에 충실
  - 경량화되어 빠르게 적용 가능
- java-jwt
  - Auth0에서 개발하여 신뢰성 높은 보안 지원
  - 확장성과 커스터마이징에 유리
  - 다양한 인증/권한 관리 기능 포함

#### 🎫 주제 2: Spring Security & SecurityContext
- **SecurityContext**는 현재 인증된 사용자 정보를 저장하는 공간. → "로그인 유지 상태"를 관리하는 역할!
- SecurityContext의 동작 흐름
  - JWT 인증 후 SecurityContext에 인증 정보를 저장하면, 다음 요청에서도 사용자 정보를 유지 가능.
  - 이후 요청마다 SecurityContext에서 사용자 정보를 가져와 인증을 유지하고, 로그아웃하면 SecurityContext를 비운다. 
- 모든 요청은 Spring Security의 필터(JwtAuthenticationFilter)를 거쳐서 처리된다.
- → 이후 컨트롤러에서 `@AuthenticationPrincipal`로 인증된 사용자 정보에 접근 가능

#### 🎫 주제 3: JwtTokenProvider & JwtAuthenticationFilter
- JwtTokenProvider
  - 토큰 생성, 검증, 아이디 추출 처리
- JwtAuthenticationFilter
  - doFilterInternal 함수를 포함.
  - HTTP 요청을 가로채서 헤더에서 JWT 토큰을 추출하고, 이를 JwtTokenProvider로 검증한 후 유효하면 사용자 인증 정보를 SecurityContext에 설정하는 역할.
  - 인증 실패 컨트롤도 수행한다.  
- ⇒ TokenProvider는 토큰 관련 비즈니스 로직을, Filter는 해당 토큰을 기반으로 인증 처리 흐름을 관리


### 오늘의 도전 과제와 해결 방법
- 도전 과제 1: jjwt 라이브러리 0.16.5 버전 사용
  - 깃허브 레포지토리의 공식 문서를 보며 토큰 기능을 구현하였다.  
  - jjwt가 0.12.x 부터 함수들의 이름이 달라지고, 구현 방법도 조금씩 달라졌다. jjwt는 토큰 생성, 검증, 아이디 추출 기능을 구현할 때 사용하였는데, 참고할 만한 문서가 많이 없어 어려움이 있었다. 깃 레포지토리에 리드미가 잘 적혀 있어 공식 문서를 참고해 구현했다. 또 지피티도 이전 버전 jjwt의 코드를 알려줘서, 지피티도 공식문서로 학습시켜 진행했다.  

### 오늘의 회고
- 오늘의 학습 경험에 대한 자유로운 생각이나 느낀 점을 기록합니다.
- 성공적인 점, 개선해야 할 점, 새롭게 시도하고 싶은 방법 등을 포함할 수 있습니다.

### 참고 자료 및 링크
- [링크 제목](URL)
- [링크 제목](URL)
